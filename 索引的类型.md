在InnoDB中，每一张表就是多个B+树

## 索引的类型

- 主键索引(聚簇索引)：叶子节点存储整行数据；

- 非主键索引(二级索引，普通索引)：叶子节点存储主键的值；
- 唯一索引：与普通索引类似，但索引列的值必须唯一；

## 索引维护

在索引B+树上**添加**数据时，如果是递增添加，则只需要在插入新记录即可；

如果插入的数据在原数据范围之内，则需要移动原数据以空出位置，这可能会造成“页分裂”.

- 页分裂需要申请新数据页并挪动数据，造成性能下降
- 页分裂影响数据页的利用率

在索引B+树上**删除**数据时，可能会造成数据页合并。

## 自增主键or业务字段主键？



基于以上索引维护原则，往往要求使用自增主键作为索引，具有以下好处：

```NOT NULL PRIMARY KEY AUTO_INCREMENT```

- 自增主键作为索引，保证插入有序性，不会涉及到记录挪动和子节点分裂
- 自增主键作为索引，非主键索引(二级索引，普通索引)存储的值则为整形，只占4字节

什么情况下使用业务字段作为主键？

- 只有一个索引
- 此索引是唯一索引

由于只有一个索引，不用考虑普通索引的叶子节点大小问题。



